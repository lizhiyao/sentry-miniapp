# 微信小程序 Sentry 示例

这是一个展示如何在微信小程序中使用 Sentry 进行错误监控的示例项目。此示例直接引用 sentry-miniapp 的源码，用于开发调试和验证功能。

## 开发模式运行步骤

### 1. 构建 Sentry SDK

在项目根目录运行以下命令，将 TypeScript 源码编译为小程序可用的 JavaScript：

```bash
# 构建小程序版本的 SDK
npm run build:miniapp

# 或者使用开发模式（包含提示信息）
npm run dev:miniapp
```

### 2. 在微信开发者工具中运行

1. 使用微信开发者工具打开此目录（`examples/wxapp`）
2. 在微信开发者工具中导入项目
3. 设置 AppID（可以使用测试号）
4. 点击编译运行

### 3. 开发调试

- 修改源码后，重新运行 `npm run build:miniapp` 重新构建
- 在微信开发者工具中刷新或重新编译即可看到更新

## 功能演示

- **用户信息获取**：演示如何获取用户信息并设置到 Sentry
- **网络请求测试**：演示网络请求的错误捕获
- **异常捕获**：演示手动捕获和上报异常
- **消息上报**：演示自定义消息的上报
- **异步错误**：演示异步错误的捕获

## 注意事项

### 开发模式

- 此示例直接引用源码，用于开发调试
- 每次修改源码后需要重新构建：`npm run build:miniapp`
- 构建后的文件位于 `lib/` 目录下

### 生产使用

在生产环境中使用时，建议：

1. 使用发布的 npm 包而不是直接引用源码
2. 配置真实的 Sentry DSN
3. 根据实际需求调整集成配置
4. 启用生产模式的错误上报

## 文件结构

```
wxapp/
├── app.js          # 应用入口文件
├── app.json        # 应用配置文件
├── app.wxss        # 全局样式文件
├── sitemap.json    # 站点地图配置
├── project.config.json  # 项目配置文件
└── pages/
    └── index/
        ├── index.js    # 首页逻辑
        ├── index.wxml  # 首页结构
        └── index.wxss  # 首页样式
```